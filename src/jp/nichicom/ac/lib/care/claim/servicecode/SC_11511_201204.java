package jp.nichicom.ac.lib.care.claim.servicecode;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

/**
 * 通所介護
 * 
 * @since V6.0.0
 * @author Masahiko.Higuchi
 * 
 */
public class SC_11511_201204 extends Qkan10011_ServiceUnitGetter {
    public String getServiceName() {
        return "通所介護";
    }

    public String getServiceCodeKind() {
        return "15";
    }

    public String getSystemServiceKindDetail() {
        return "11511";
    }

    public ArrayList<HashMap<String, String>> getSystemServiceCodeItem(
            Map<String, String> map) {
        ArrayList<HashMap<String, String>> sysSvcCdItems = new ArrayList<HashMap<String, String>>();

        // パラメータ抽出
        // =========================================================================
        // 1150113 施設区分
        int _1150113 = getIntValue(map, "1150113");

        // 1150104 時間区分
        int _1150104 = getIntValue(map, "1150104");

        // 1150108 人員減算
        int _1150108 = getIntValue(map, "1150108");

        // 1 要介護度
        int _1 = convertYokaigodo(getIntValue(map, "1"));

        // 1150119 個別機能訓練指導加算I型
        int _1150119 = getIntValue(map, "1150119");
        
        // 1150120 個別機能訓練指導加算II型
        int _1150120 = getIntValue(map, "1150120");

        // 1150106 入浴加算
        int _1150106 = getIntValue(map, "1150106");

        // 1150115 若年性認知症利用者受入加算
        int _1150115 = getIntValue(map, "1150115", 1);

        // 1150116 栄養改善加算
        int _1150116 = getIntValue(map, "1150116");

        // 1150112 口腔機能向上加算
        int _1150112 = getIntValue(map, "1150112");

        // 12 中山間地域等でのサービス提供加算
        int _12 = getIntValue(map, "12", 1);

        // 1150117 サービス提供体制強化加算
        int _1150117 = getIntValue(map, "1150117");

        // 16 同一建物居住者へのサービス提供
        int _16 = getIntValue(map, "16", 1);
        
        // 17 介護職員処遇改善加算
        int _17 = getIntValue(map, Qkan10011_ServiceUnitGetter.SYOGUKAIZEN_KASAN, 1);

        // 独自コード生成
        // ===========================================================================
        StringBuilder sb = new StringBuilder();

        // 施設区分
        sb.append(CODE_CHAR[_1150113]);

        // 時間区分
        // 療養通所の場合
        if (_1150113 == 5) {
            sb.append(DEFAULT_CHAR);
            sb.append(CODE_CHAR[_1150104]);
        } else {
            sb.append(CODE_CHAR[_1150104]);
            sb.append(DEFAULT_CHAR);
        }

        // 人員減算
        sb.append(CODE_CHAR[_1150108]);

        // 要介護度
        if (_1150113 == 5) {
            // 療養通所の場合、要介護度は無関係
            sb.append(Qkan10011_ServiceUnitGetter.DEFAULT_CHAR);
        } else {
            sb.append(CODE_CHAR[_1]);
        }

        putSystemServiceCodeItem(sysSvcCdItems, sb.toString());

        // 加算
        // ============================================================================
        // 8110 通所介護中山間地域等提供加算
        if (_12 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z8110");
        }
        
        // 入浴加算
        if (_1150106 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z5301");
        }
        
        // 個別機能訓練指導加算I
        if (_1150119 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z5051");
        }
        
        // 個別機能訓練指導加算II
        if (_1150120 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z5052");
        }
        
        // 若年性認知症利用者受入加算
        if (_1150115 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z6109");
        }
        
        // 栄養改善加算
        if (_1150116 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z5605");
        }
        
        // 口腔機能向上加算
        if (_1150112 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z5606");
        }
        
        // 同一建物居住者へのサービス提供
        if (_16 > 1) {
            putSystemServiceCodeItem(sysSvcCdItems, "Z5611");
        }
        
        // 通所介護サービス提供体制加算
        switch (_1150117) {
        // 6101 通所介護サービス提供体制加算I
        case 2:
            putSystemServiceCodeItem(sysSvcCdItems, "Z6101");
            break;
        // 6102 通所介護サービス提供体制加算II
        case 3:
            putSystemServiceCodeItem(sysSvcCdItems, "Z6102");
            break;
        // 6103 通所介護サービス提供体制加算III
        case 4:
            putSystemServiceCodeItem(sysSvcCdItems, "Z6103");
            break;
        }
        
        // 介護職員処遇改善を返却
        switch(_17){
        // 通所介護処遇改善加算I
        case 2:
            putSystemServiceCodeItem(sysSvcCdItems, "Z6104");
            break;
        // 通所介護処遇改善加算II
        case 3:
            putSystemServiceCodeItem(sysSvcCdItems, "Z6105");
            break;
        // 通所介護処遇改善加算III
        case 4:
            putSystemServiceCodeItem(sysSvcCdItems, "Z6106");
            break;
        }

        return sysSvcCdItems;
    }
}
